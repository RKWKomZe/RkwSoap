// #########################################################
// Extbase Configuration
// #########################################################
config.tx_extbase{
	persistence {
		classes {

            RKW\RkwSoap\Domain\Model\EventPlace {
                mapping {
                    tableName = tx_rkwevents_domain_model_eventplace
                }
            }


            RKW\RkwSoap\Domain\Model\Event {
                mapping {
                    tableName = tx_rkwevents_domain_model_event
                }
            }


            RKW\RkwSoap\Domain\Model\EventReservationAddPerson {
                mapping {
                    tableName = tx_rkwevents_domain_model_eventreservationaddperson
                }
            }


            RKW\RkwSoap\Domain\Model\EventReservation {
                mapping {
                    tableName = tx_rkwevents_domain_model_eventreservation
                }
            }


			RKW\RkwSoap\Domain\Model\FrontendUser {
				mapping {
					tableName = fe_users

					# if we set an value, we filter by it
					# if do not set anything, all pages are found
					recordType =

					# mapping to properties of class
					columns {
						tstamp.mapOnProperty = tstamp
						crdate.mapOnProperty = crdate
						disable.mapOnProperty = disable
						deleted.mapOnProperty = deleted
					}
				}
			}


			RKW\RkwSoap\Domain\Model\FrontendUserGroup {
				mapping {
					tableName = fe_groups

					# if we set an value, we filter by it
					# if do not set anything, all pages are found
					recordType =

					# mapping to properties of class
					columns {
						tstamp.mapOnProperty = tstamp
						crdate.mapOnProperty = crdate
						disable.mapOnProperty = disable
						deleted.mapOnProperty = deleted
					}

				}
			}


            RKW\RkwSoap\Domain\Model\OrderItem {
                mapping {
                    tableName = tx_rkwshop_domain_model_orderitem

                    // from /rkw_shop/Configuration/TypoScript/setup.typoscript
                    columns {
                        ext_order.mapOnProperty = order
                        crdate.mapOnProperty = crdate
                        tstamp.mapOnProperty = tstamp
                        deleted.mapOnProperty = deleted
                    }
                }
            }


            RKW\RkwSoap\Domain\Model\Order {
                mapping {
                    tableName = tx_rkwshop_domain_model_order

                    // from /rkw_shop/Configuration/TypoScript/setup.typoscript
                    columns {
                        crdate.mapOnProperty = crdate
                        tstamp.mapOnProperty = tstamp
                        hidden.mapOnProperty = hidden
                        deleted.mapOnProperty = deleted
                    }
                }
            }


            RKW\RkwSoap\Domain\Model\Product {
                mapping {
                    tableName = tx_rkwshop_domain_model_product

                    // from /rkw_shop/Configuration/TypoScript/setup.typoscript
                    columns {
                        crdate.mapOnProperty = crdate
                        tstamp.mapOnProperty = tstamp
                        hidden.mapOnProperty = hidden
                        deleted.mapOnProperty = deleted
                    }
                }
            }


            RKW\RkwSoap\Domain\Model\Series {
                mapping {
                    tableName = tx_rkwbasics_domain_model_series
                }
            }


            RKW\RkwSoap\Domain\Model\ShippingAddress {
                mapping {
                    tableName = tx_feregister_domain_model_shippingaddress
                }
            }


            RKW\RkwSoap\Domain\Model\Stock {
                mapping {
                    tableName = tx_rkwshop_domain_model_stock
                }
            }

		}
	}
}

// #########################################################
// Plugin Configuration
// #########################################################

plugin.tx_rkwsoap  {
    persistence {
    	storagePid = {$plugin.tx_rkwsoap.persistence.storagePid}
    }

    /*
	view {
		templateRootPath = {$plugin.tx_rkwsoap.view.templateRootPath}{$plugin.tx_rkwsoap.settings.soapServer.version}/Templates/
		partialRootPath = {$plugin.tx_rkwsoap.view.partialRootPath}{$plugin.tx_rkwsoap.settings.soapServer.version}/Partials/
		layoutRootPath = {$plugin.tx_rkwsoap.view.layoutRootPath}{$plugin.tx_rkwsoap.settings.soapServer.version}/Layouts/
	}
	*/

    view {
        layoutRootPaths {
            0 = EXT:rkw_soap/Resources/Private/Layouts/
            #1 = {$plugin.tx_rkwsoap.view.layoutRootPath}{$plugin.tx_rkwsoap.settings.soapServer.version}/Layouts/
            1 = {$plugin.tx_rkwsoap.view.layoutRootPath}
        }
        templateRootPaths {
            0 = EXT:rkw_soap/Resources/Private/Templates/
            1 = {$plugin.tx_rkwsoap.view.templateRootPath}legacy-{$plugin.tx_rkwsoap.settings.soapServer.version}/Templates/
            #1 = {$plugin.tx_rkwsoap.view.templateRootPath}
        }
        partialRootPaths {
            0 = EXT:rkw_soap/Resources/Private/Partials/
            1 = {$plugin.tx_rkwsoap.view.partialRootPath}legacy-{$plugin.tx_rkwsoap.settings.soapServer.version}/Partials/
        }
    }

	features {
		# uncomment the following line to enable the new Property Mapper.
		# rewrittenPropertyMapper = 1
	}

	settings {

		soapServer {

			username = {$plugin.tx_rkwsoap.settings.soapServer.username}
			password = {$plugin.tx_rkwsoap.settings.soapServer.password}
			url = {$plugin.tx_rkwsoap.settings.soapServer.url}
			allowedRemoteIpList = {$plugin.tx_rkwsoap.settings.soapServer.allowedRemoteIpList}
            disableSecurityChecks  = {$plugin.tx_rkwsoap.settings.soapServer.disableSecurityChecks}
            version = {$plugin.tx_rkwsoap.settings.soapServer.version}
		}
	}
}


// #########################################################
// AJAX Configuration
// #########################################################
txRkwSoapSoapPage = PAGE
txRkwSoapSoapPage {


	typeNum = 1445105145

	config {

    	disableAllHeaderCode = 1
    	xhtml_cleaning = 0
    	admPanel = 0
    	no_cache = 0
    	debug = 0

    	additionalHeaders.10.header = Content-type:text/xml;charset=utf-8|Expires: 0|Cache-Control: no-cache, must-revalidate, max-age=0, post-check=0, pre-check=0, FALSE|Pragma: no-cache
    	metaCharset = utf-8

		index_enable = 0
		index_metatags = 0
		index_externals = 0
  	}


  	10 = USER_INT
  	10 {
		userFunc = TYPO3\CMS\Extbase\Core\Bootstrap->run
		extensionName = RkwSoap
		pluginName = Rkwsoap
		vendorName = RKW
		controller = Soap
		switchableControllerActions {

			# Again: Controller-Name and Action
			Soap {
				1 = soap
				2 = wsdl
			}
		}

		view =< plugin.tx_rkwsoap.view
		persistence =< plugin.tx_rkwsoap.persistence
		settings =< plugin.tx_rkwsoap.settings
  	}
}

// #########################################################
// Various
// #########################################################
module.tx_rkwsoap < plugin.tx_rkwsoap

# MF test. Something does not work with the template path
plugin.tx_rkwsoap_rkwsoap < plugin.tx_rkwsoap

